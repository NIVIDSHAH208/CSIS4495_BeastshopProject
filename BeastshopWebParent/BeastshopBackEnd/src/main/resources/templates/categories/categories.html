<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments::page_head('Categories-Beast shop Admin')"></head>
<body>
	<div class="container-fluid">
		<div th:replace="navigation::menu"></div>
		<div>
			<h2>Manage Categories</h2>
			<a th:href="@{/categories/new}"
				class="mr-2 fas fa-folder-plus fa-2x icon-dark"></a> <a
				th:href="@{/categories/export/csv}"
				class="fas icon-dark fa-file-csv fa-2x mr-2"></a>
		</div>
		<div th:if="${message!=null}" class="alert alert-success text-center">
			[[${message}]]</div>

		<div>
			<form th:action="@{/categories/page/1}" class="form-inline m-3">
				Filter:&nbsp; <input type="search" th:value="${keyword}"
					name="keyword" class="form-control" required /> &nbsp;&nbsp;
				<button type="submit" class="btn btn-primary mr-2">
					<i class="fas fa-search"></i>
				</button>
				<button type="button" onclick="clearFilter()"
					class="btn btn-secondary">
					<i class="fas fa-eraser"></i>
				</button>
			</form>
		</div>

		<div class="full-details">
			<table
				class="table table-responsive-xl table-bordered table-striped table-hover">
				<thead class="table-success">
					<tr>
						<th>ID</th>
						<th>Category Image</th>
						<th>Category Name</th>
						<th>Alias</th>
						<th>Enabled</th>
						<th></th>
					</tr>
				</thead>
				<tbody>
					<!-- Using thymeleaf to iterate through all users -->
					<tr th:each="cat:${listCategories}">
						<td>[[${cat.id}]]</td>
						<td>
							<img th:src="@{${cat.imagePath}}" style="width:100px;" class="img-fluid"/>
						</td>
						<td>[[${cat.name}]]</td>
						<td>[[${cat.alias}]]</td>
						<td>
							<div th:replace="fragments::category_status" />
						</td>
						<td>
							<div th:replace="fragments::category_actions" />
						</td>
					</tr>

				</tbody>
			</table>
		</div>


		<div th:replace="fragments::footer"></div>

	</div>
	<script type="text/javascript">
		$(document).ready(
				function() {
					$(".link-delete").on(
							"click",
							function(e) {
								e.preventDefault();
								//alert($(this).attr("href"))
								link = $(this);
								catId = link.attr("catId")
								$("#yesButton").attr("href", link.attr("href"))
								$("#confirmDeleteText").text(
										"Do you want to delete this Category: "
												+ catId + "?")
								$("#deleteModal").modal();
							})
				});

		function clearFilter() {
			window.location = "[[@{/categories}]]"
		}
	</script>
</body>
</html>